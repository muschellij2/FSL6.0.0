<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>FIRST/UserGuide</title>
<link rel="stylesheet" type="text/css" media="all" charset="utf-8" href="fsl/css/common.css">
<link rel="stylesheet" type="text/css" media="screen" charset="utf-8" href="fsl/css/screen.css">
<link rel="stylesheet" type="text/css" media="print" charset="utf-8" href="fsl/css/print.css">
<style type="text/css">
ul.pagetitle{
  display: inline;
  margin: 0;
  padding: 0;
  font-size: 1.5em;
}
li.pagetitle{
  display: inline;
  margin: 0;
}
td.noborder {
  border: 0;
}
</style>
</head>
<body>
<table>
<tr>
<td class="noborder">
<img src="logo.png">
</td>
<td class="noborder">
<ul class="pagetitle">
<li class="pagetitle"><a class="backlink">FIRST/UserGuide</a>
</ul>
<br><br>
[<a href="FSL.html">FSL</a>]&nbsp;[<a href="TitleIndex.html">TitleIndex</a>]&nbsp;[<a href="WordIndex.html">WordIndex</a>]&nbsp;
</td>
</tr>
</table>
<hr>
<div id="page">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><p class="line867"><div class="FslToolContents">
<h1>Contents</h1>
<ol><li><a href="./FIRST.html">Introduction</a></li><li>User Guide<div class="contentslist"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#Segmentation_using_FIRST">Segmentation using FIRST</a><ol><li>
<a href="#run_first_all">run_first_all</a></li><li>
<a href="#first_roi_slicesdir">first_roi_slicesdir</a></li></ol></li><li>
<a href="#General_Advice_and_Workflow">General Advice and Workflow</a></li><li>
<a href="#Vertex_Analysis_.28with_NEW_features_in_v5.0.0.29">Vertex Analysis (with NEW features in v5.0.0)</a><ol><li>
<a href="#concat_bvars">concat_bvars</a></li><li>
<a href="#randomise">randomise</a></li><li>
<a href="#General_Advice_and_Workflow-1">General Advice and Workflow</a><ol><li>
<a href="#Getting_started:">Getting started:</a></li><li>
<a href="#Create_a_design_matrix:">Create a design matrix:</a></li><li>
<a href="#Running_vertex_analysis">Running vertex analysis</a></li><li>
<a href="#Output_of_vertex_analysis">Output of vertex analysis</a></li><li>
<a href="#Other_common_design_matrices">Other common design matrices</a></li></ol></li><li>
<a href="#Viewing_results">Viewing results</a></li></ol></li><li>
<a href="#Volumetric_Analysis">Volumetric Analysis</a></li><li>
<a href="#Models">Models</a></li><li>
<a href="#Advanced_Usage">Advanced Usage</a><ol><li>
<a href="#Registration">Registration</a></li><li>
<a href="#Segmentation">Segmentation</a></li></ol></li><li>
<a href="#Boundary_Correction">Boundary Correction</a><ol><li>
<a href="#first_boundary_corr">first_boundary_corr</a></li><li>
<a href="#first_mult_bcorr">first_mult_bcorr</a></li></ol></li><li>
<a href="#Surface-based_Vertex_Analysis">Surface-based Vertex Analysis</a><ol><li>
<a href="#Viewing_surface_outputs">Viewing surface outputs</a></li><li>
<a href="#surface_fdr">surface_fdr</a></li><li>
<a href="#General_Advice_and_Workflow-2">General Advice and Workflow</a><ol><li>
<a href="#Running_vertex_analysis:">Running vertex analysis:</a></li><li>
<a href="#Output_of_vertex_analysis:">Output of vertex analysis:</a></li><li>
<a href="#Running_Multiple_Comparison_Correction:">Running Multiple Comparison Correction:</a></li><li>
<a href="#Other_common_design_matrices:">Other common design matrices:</a></li></ol></li></ol></li><li>
<a href="#first_utils">first_utils</a></li><li>
<a href="#Labels">Labels</a></li></ol></div></div></li></ol></div> <span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><p class="line867">
<h1 id="Segmentation_using_FIRST">Segmentation using FIRST</h1>
<span class="anchor" id="line-5"></span><p class="line862">The simplest way to perform segmentation using FIRST is to use the <tt class="backtick">run_first_all</tt> script which segments all the subcortical structures, producing mesh and volumetric outputs (applying boundary correction). It uses default settings for each structure which have been optimised empirically. <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line867">
<h2 id="run_first_all">run_first_all</h2>
<span class="anchor" id="line-8"></span><ul><li><p class="line862">This script will run lower-level utilities (including <tt class="backtick">first_flirt</tt>, <tt class="backtick">run_first</tt> and <tt class="backtick">first</tt>) on all the structures, with the settings (number of modes and boundary correction) tuned to be optimal for each structure. Both mesh (vtk) and volumetric (nifti) outputs are generated. Corrected and uncorrected volumetric representations of the native mesh are generated. The final stage of the script ensures that there is no overlap between structures in the 3D image, which can occur even when there is no overlap of the meshes, as can be seen in the individual, uncorrected segmentation images in the 4D image file. <span class="anchor" id="line-9"></span></li><li>Example usage: <span class="anchor" id="line-10"></span><p class="line891"><tt class="backtick">run_first_all&nbsp;-i&nbsp;t1_image&nbsp;-o&nbsp;output_name</tt> <span class="anchor" id="line-11"></span><ul><li><p class="line862">The argument <tt class="backtick">-i</tt> specifies the original T1-weighted structural image (only T1-weighted images can be used). <span class="anchor" id="line-12"></span></li><li><p class="line862">The argument <tt class="backtick">-o</tt> specifies the filename for the output image basename. <tt class="backtick">run_first_all</tt> will include the type of boundary  correction into the final file name. For example, the command above would produce <tt class="backtick">output_name_all_fast_firstseg.nii.gz</tt>  and <tt class="backtick">output_name_all_fast_origsegs.nii.gz</tt>. <span class="anchor" id="line-13"></span></li><li><p class="line891"><strong>Note that this usage is very different from previous versions</strong> <span class="anchor" id="line-14"></span></li></ul><p class="line862">The script is written such that if you have FSL setup to use local cluster computing it will automatically parallelise the fitting of each structure. Either way, it will create a log directory that contains the error outputs of each command, and you should check these. To do that simply do: <tt class="backtick">cat&nbsp;*.logs/*.e*</tt><br>
 <span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span></li></ul><p class="line874">and if there are no errors then you will see no output, otherwise you will see what errors have occured. <span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><ul><li>Output <span class="anchor" id="line-19"></span><ul><li><p class="line891"><tt class="backtick">output_name_all_fast_firstseg.nii.gz</tt> : This is a single image showing the segmented output for all structures. The image is produced by filling the estimated surface meshes and then running a step to ensure that there is no overlap between structures. The output uses the <a href="./FIRST(2f)UserGuide.html#Labels">CMA standard labels</a> (the colour table is built into FSLView). If another boundary correction method is specified, the name <tt class="backtick">fast</tt> in this filename will change to reflect the boundary correction that is used. Note that if only one structure is specified then this file will be called <tt class="backtick">output_name-struct_corr.nii.gz</tt> instead (e.g. <tt class="backtick">sub001-L_Caud_corr.nii.gz</tt>). <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span></li><li class="gap"><p class="line891"><tt class="backtick">output_name_all_fast_origsegs.nii.gz</tt> : This is a 4D image containing the individual structure segmentations, converted directly from the native mesh representation and without any boundary correction. For each structure there is an individual 3D image where the interior is labeled according to the <a href="./FIRST(2f)UserGuide.html#Labels">CMA standard labels</a> while the boundary uses these label values plus 100. Note that if only one structure is specified then this file will be called <tt class="backtick">output_name-struct_first.nii.gz</tt> instead (e.g. <tt class="backtick">sub001-L_Caud_first.nii.gz</tt>). <span class="anchor" id="line-22"></span></li><li><p class="line891"><tt class="backtick">output_name_first.vtk</tt> : This is the mesh representation of the final segmentation. It can be directly viewed in FSLView using 3D mode. <span class="anchor" id="line-23"></span></li><li><p class="line891"><tt class="backtick">output_name_first.bvars</tt>: Do not delete this file. It contains the mode parameters and the model used. This file, along with the appropriate model files, can be used to reconstruct the other outputs. The mode parameters are what FIRST optimizes. This output can be used be used later as to perform vertex analysis or as a shape prior to segment other shapes. <span class="anchor" id="line-24"></span></li></ul></li><li>Options <span class="anchor" id="line-25"></span><ul><li><p class="line891"><tt class="backtick">-m</tt> specifies the boundary correction method. The default is auto, which chooses different options for different structures using the settings that were found to be empirically optimal for each structure. Other options are: fast (using FAST-based, mixture-model, tissue-type classification); thresh (thresholds a simple single-Gaussian intensity model); or none. <span class="anchor" id="line-26"></span></li><li><p class="line891"><tt class="backtick">-s</tt> allows a restricted set of structures (one or more) to be selected. For more than one structure the list must be comma separated with no spaces. The list of possible structures is: <tt class="backtick">L_Accu&nbsp;L_Amyg&nbsp;L_Caud&nbsp;L_Hipp&nbsp;L_Pall&nbsp;L_Puta&nbsp;L_Thal&nbsp;R_Accu&nbsp;R_Amyg&nbsp;R_Caud&nbsp;R_Hipp&nbsp;R_Pall&nbsp;R_Puta&nbsp;R_Thal&nbsp;BrStem</tt>. <span class="anchor" id="line-27"></span></li><li><p class="line891"><tt class="backtick">-b</tt> specifies that the input image is brain extracted - important when calculating the registration. <span class="anchor" id="line-28"></span></li><li><p class="line891"><tt class="backtick">-a</tt> specifies a pre-calculated registration matrix (from running first_flirt) to be used instead of calculating the registration again. <span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span></li></ul></li></ul><p class="line867">
<h2 id="first_roi_slicesdir">first_roi_slicesdir</h2>
<span class="anchor" id="line-31"></span><p class="line867"><tt class="backtick">first_roi_slicesdir</tt> is a script to generate summary images, in a webpage format, for the segmentation outputs. It is very useful for checking the quality of segmentations, especially when there are many subjects. It runs the script slicesdir on a region of interest (ROI) defined by a set of label images (e.g. output of FIRST). A set of temporary ROI images are created and then slicesdir is then run on those. <span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><p class="line862">Usage: <tt class="backtick">first_roi_slicesdir&nbsp;&lt;list&nbsp;of&nbsp;t1_images&gt;&nbsp;&lt;list&nbsp;of&nbsp;label_images&gt;</tt> <span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><p class="line862">Example:  <tt class="backtick">first_roi_slicesdir&nbsp;*_t1.nii.gz&nbsp;*_all_fast_firstseg.nii.gz</tt> <span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><p class="line867">
<h1 id="General_Advice_and_Workflow">General Advice and Workflow</h1>
<span class="anchor" id="line-38"></span><p class="line874">Below is a recommendation for running FIRST in a systematic way. While it is only a recommendation, you may find that organizing your data in a different way than suggested below leads to complications further down the road, especially when moving files. <span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><ul><li>Create a main directory in which the FIRST analysis will be carried out. The first step in analysis will be to copy all of the structural images to be segmented into this directory. All FIRST commands should be run in this directory. Subdirectories may be created to contain certain outputs (more later) but all input images should be placed in this main directory. The pathnames for files used as input options for all of the steps of FIRST should start in this directory and may include subdirectories as needed. The reason for this is that the pathnames of the structural input images are written into the bvars output files. When these bvars files are used (i.e. for vertex analysis), the original image must be able to be located. Inputting full pathnames is possible, but if you move the directory containing the structural images, the pathnames within the bvars files will have to be changed. Therefore, we recommend keeping all FIRST inputs and outputs in one main directory and keeping all pathnames relative to this directory. This way, if the entire directory is moved then the relative position of all input and output files will remain the same. <span class="anchor" id="line-41"></span><p class="line862">For example, imagine you have a directory called <tt class="backtick">scratch</tt>, and you create a sub-directory called <tt class="backtick">subcort</tt>. Start by copying all of your images into the <tt class="backtick">subcort</tt> directory. Once this is done, all subsequent steps should be carried out from within the directory <tt class="backtick">subcort</tt>. <span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span></li><li class="gap"><p class="line862">Use a standardized naming system for all of your structural images and subsequent output files. For example, we will consider an experiment where there are 10 controls and 10 diseased subjects. In this case we name the structural images <tt class="backtick">con01.nii.gz,&nbsp;con02.nii.gz,&nbsp;...,&nbsp;dis01.nii.gz,&nbsp;dis02.nii.gz,&nbsp;...</tt> and keep the base name part (i.e. <tt class="backtick">con01</tt>) the same for all outputs of FIRST. <span class="anchor" id="line-44"></span></li><li><p class="line862">To run <tt class="backtick">run_first_all</tt> on a group of subjects a simple &quot;for&quot; loop may be used from the command line: <tt class="backtick">for&nbsp;i&nbsp;in&nbsp;01&nbsp;02&nbsp;03&nbsp;04&nbsp;05&nbsp;06&nbsp;07&nbsp;08&nbsp;09&nbsp;10&nbsp;;&nbsp;do&nbsp;run_first_all&nbsp;-i&nbsp;con${i}&nbsp;-o&nbsp;con${i}&nbsp;;&nbsp;done</tt> A similar loop can then be run for the diseased subjects (<tt class="backtick">dis01,&nbsp;...,&nbsp;dis10</tt>). These commands could be put into one big for loop, but it is usually simpler to separate them, especially if you have a different number of subjects in each group. <span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span></li><li class="gap">You then need to verify that the registrations and subsequent segmentations were successful. To start with, check that there are no errors in the log files by doing: <span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span></li></ul><p class="line867"><tt class="backtick">cat&nbsp;*.logs/*.e*</tt> <span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><p class="line874">which will show no output if there are no errors. Once you've verified that there are no errors, then you can most easily check the results from a group of subjects using the relevant slicesdir tools. <span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><ul><li>To check the registrations: <span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span></li></ul><p class="line867"><tt class="backtick">${FSLDIR}/bin/slicesdir&nbsp;-p&nbsp;${FSLDIR}/data/standard/MNI152_T1_1mm.nii.gz&nbsp;*_to_std_sub.nii.gz</tt> <span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><p class="line862">This command creates a directory called &quot;slicesdir&quot; which will contain a webpage output of the summary results for each subject's registration. Note that if the registration stage failed then the model fitting will not work, even though <tt class="backtick">run_first_all</tt> will continue to run and generate output. Therefore it is critical to check the registration results. <span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><p class="line862">On the webpage, each subject's registered image (<tt class="backtick">*_to_std_sub.nii.gz</tt>) will be displayed in sagittal, coronal, and axial views, with a red outline showing the edges from <tt class="backtick">MNI152_T1_1mm</tt> standard brain. Open this webpage in any web browser. <span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><p class="line874">When assessing the registrations, pay particular attention to the sub-cortical structures. It does not matter if the cortex does not always align well, particularly where there are large ventricles, as it is the alignment of the sub-cortical structures which is important for the segmentation. <span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><ul><li>To check the segmentations: <span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span></li></ul><p class="line862">Firstly, fix any registration errors (see below for <tt class="backtick">first_flirt</tt> and various options available) and re-run the segmentation using the new registration. After that the segmentation output can be inspected. This can be done using <tt class="backtick">first_roi_slicesdir</tt> which generates a similar webpage, but this time showing the segmentations. <span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><p class="line862">If there are any problems, you can try different segmentation options (e.g. number of modes, boundary correction method, etc.) using the individual tools described in the <a href="./FIRST(2f)UserGuide.html#Advanced_Usage">Advanced Usage</a> section. <span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-69"></span><hr /><p class="line874"> <span class="anchor" id="line-70"></span>
<h1 id="Vertex_Analysis_.28with_NEW_features_in_v5.0.0.29">Vertex Analysis (with NEW features in v5.0.0)</h1>
<span class="anchor" id="line-71"></span><ul><li>This section describes how to calculate vertex-wise statistics to investigate localised shape differences. <span class="anchor" id="line-72"></span><p class="line862">Vertex analysis is performed using <tt class="backtick">first_utils</tt> in a mode of operation that aims to assess group differences on a per-vertex basis. It now uses <a class="nonexistent" href="./randomise.html">randomise</a> to do the statistical analysis. The simplest, and very common, design matrix is a single EV (regressor) specifying group membership (-1 for one group, +1 for the other group) together with a single F-contrast (also requiring a single t-contrast) which then tests for group differences in a two-sided (unsigned) test. Any of the many available multiple comparison correction techniques available in randomise can be used (some method of correction should be used if presenting results in a publication). The output is a 4D image that are can be processed via <tt class="backtick">randomise</tt>. The image outputs from <tt class="backtick">randomise</tt> use the standard naming conventions and display 1-p values (so that over 0.95 is &quot;significant&quot; at the 0.05 level).  Results are only displayed on the structure's surface.  An alternative mesh-based method (providing a base mesh that is the mean mesh for the first group and vectors that are the displacement vectors between group means), as was used in the previous versions of FIRST, is also available via the <tt class="backtick">--surfaceout</tt> option. <span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span></li></ul><p class="line862">Internally the vertex locations from each subject (at a corresponding anatomical point) are projected onto the surface normal of the average shape (of this particular cohort).  The projections are scalar values, allowing them to be processed by univariate statistical methods (e.g. <tt class="backtick">randomise</tt>).  It is these projection values that are stored in the 4D file (one image per subject) and they represent the signed, perpendicular distance from the average surface, where a positive value is outside the surface and a negative value is inside.  A mask file (covering the vertices on the surface of the average shape) is also output. <span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><ul><li><p class="line891"><strong>Usage</strong>: <span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span></li></ul><p class="line867"><tt class="backtick">first_utils&nbsp;--vertexAnalysis&nbsp;--usebvars&nbsp;-i&nbsp;concatenated_bvars&nbsp;-d&nbsp;design.mat&nbsp;-o&nbsp;output_basename&nbsp;[--useReconNative&nbsp;--useRigidAlign&nbsp;]&nbsp;[--useReconMNI]&nbsp;[--usePCAfilter&nbsp;-n&nbsp;number_of_modes]</tt> <span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span><ul><li>Options: <span class="anchor" id="line-81"></span><ul><li><p class="line891"><tt class="backtick">--vertexAnalysis</tt> : Set mode of operation such that vertex-wise stats are calculated. <span class="anchor" id="line-82"></span></li><li><p class="line891"><tt class="backtick">--usebvars</tt> : Set mode of operation such that it uses the combined mode parameters across the group (this is compulsory for vertex analysis). <span class="anchor" id="line-83"></span></li><li><p class="line891"><tt class="backtick">-i</tt> : concatenated bvars file containing mode parameters from all subjects (created by <a href="./FIRST(2f)UserGuide.html#concat_bvars">concat_bvars</a>). <span class="anchor" id="line-84"></span></li><li><p class="line891"><tt class="backtick">-o</tt> : Base name of output meshes. <span class="anchor" id="line-85"></span></li><li><p class="line891"><tt class="backtick">-d</tt> : FSL design matrix (as created by the <tt class="backtick">Glm</tt> GUI). <span class="anchor" id="line-86"></span></li><li><p class="line891"><tt class="backtick">--useReconNative</tt> : Reconstructs the meshes in the native space of the image. For vertex-wise stats need to also use <tt class="backtick">--useRigidAlign</tt>. <span class="anchor" id="line-87"></span></li><li><p class="line891"><tt class="backtick">--useReconMNI</tt> : Reconstructs the meshes in MNI space (native space of the model). This does not require the flirt matrices. <span class="anchor" id="line-88"></span></li><li><p class="line891"><tt class="backtick">--useRigidAlign</tt> : Uses a 6 Degrees Of Freedom transformation to remove pose from the meshes (see <tt class="backtick">--useScale</tt> if you wish to remove size as well). All meshes are aligned to the mean shape from the shape Model. Can be used with either <a class="nonexistent" href="./ReconNative.html">ReconNative</a> or ReconMNI. <span class="anchor" id="line-89"></span></li><li><p class="line891"><tt class="backtick">--useScale</tt> : Used in conjunction with <tt class="backtick">--useRigidAlign</tt>, it will remove global scalings when aligning meshes. <span class="anchor" id="line-90"></span></li><li><p class="line891"><tt class="backtick">--usePCAfilter</tt> : Used in conjunction with <tt class="backtick">-n&nbsp;number_of_modes</tt>. When used the number of modes used to reconstruct the mesh will be truncated at the integer &quot;number_of_modes&quot;. <span class="anchor" id="line-91"></span></li><li><p class="line891"><tt class="backtick">--surfaceout</tt> : Output vertex analysis on the surface (old method) <span class="anchor" id="line-92"></span></li></ul></li><li>Notes: <span class="anchor" id="line-93"></span><p class="line862">The outputs from <tt class="backtick">first_utils</tt> are now images suitable for statistical testing in <tt class="backtick">randomise</tt>.  It is still necessary to specify a design matrix (but not contrasts) for <tt class="backtick">first_utils</tt>, whereas both a design matrix and contrasts are necessary for the <tt class="backtick">randomise</tt> step. <span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span></li></ul><p class="line867">
<h2 id="concat_bvars">concat_bvars</h2>
<span class="anchor" id="line-96"></span><p class="line867"><tt class="backtick">concat_bvars</tt> is used to concatenate the &quot;<tt class="backtick">.bvars</tt>&quot; files across subjects. All subjects should be created using the same model and <tt class="backtick">concat_bvars</tt> will keep track of the number of subjects that the final, concatenated file contains. Usage: <span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><p class="line867"><tt class="backtick">concat_bvars&nbsp;output_name.bvars&nbsp;[list&nbsp;of&nbsp;&quot;.bvars&quot;&nbsp;files]</tt> <span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><p class="line874">Example: <span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span><p class="line867"><tt class="backtick">concat_bvars&nbsp;L_Hipp_all.bvars&nbsp;con*_L_Hipp_first.bvars&nbsp;dis*_L_Hipp_first.bvars</tt> <span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span><p class="line867">
<h2 id="randomise">randomise</h2>
<span class="anchor" id="line-105"></span><p class="line867"><tt class="backtick">randomise</tt> is used to calculate the statistics from the 4D image output.  This requires design matrix, t-contrast and f-contrast files to be specified.  These can be created by the <a class="nonexistent" href="./FEAT(2f)Guide.html#FEAT_Programs">Glm</a> GUI. <span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><p class="line874">Example: <span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><p class="line867"><tt class="backtick">randomise&nbsp;-i&nbsp;con1_dis2_L_Hipp.nii.gz&nbsp;-m&nbsp;con1_dis2_L_Hipp_mask.nii.gz&nbsp;-o&nbsp;con1_dis2_L_Hipp_rand&nbsp;-d&nbsp;con1_dis2.mat&nbsp;-t&nbsp;con1_dis2.con&nbsp;-f&nbsp;con1_dis2.fts&nbsp;--fonly&nbsp;-D&nbsp;-F&nbsp;3</tt> <span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span><p class="line862">Here the <tt class="backtick">-d</tt>, <tt class="backtick">-t</tt>, and <tt class="backtick">-f</tt> specify the files containing the design matrix, t-contrast(s) and f-contrast(s).  The <tt class="backtick">-D</tt> option demeans the data (and design matrix - you can ignore the warning about the design having a non-zero mean, as this will be removed internally and give correct outputs).  The <tt class="backtick">-F&nbsp;3</tt> option does cluster-based multiple-comparison-correction (with an arbitrary threshold of 3, which is only an example here) but could be substituted with any other valid multiple-comparison-correction option such as <tt class="backtick">--T2</tt>, <tt class="backtick">-x</tt>, <tt class="backtick">-S</tt>.  See the <a class="nonexistent" href="./randomise.html">randomise</a> documentation for more information on available options. <span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span><p class="line874">The --fonly option is included so that only the F-statistic is calculated and used by randomise for inference.  This is then equally sensitive to changes in either direction (e.g., growth or atrophy).  To determine which direction the change is in there are two possible approaches: (i) omit this option and look at the t-contrast results (carefully taking into account the signs used in both the design matrix EVs and the contrast) or; (ii) more simply, just look at the signs of the individual data points in the 4D input file.  The second option is generally easier and is quite simply done with FSLView, by loading the corrected p-value output from randomise (the f-statistic result, having kept the --fonly option) then adding the 4D input file and using the &quot;timeseries&quot; option in FSLView to see the values from the 4D input file at boundary locations where there was a statistically significant change. <span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span><p class="line867">
<h2 id="General_Advice_and_Workflow-1">General Advice and Workflow</h2>
<span class="anchor" id="line-116"></span><p class="line874">This section covers some general recommendations for running vertex analysis. The following is not prescriptive but may be helpful, especially to new users or those less familiar with unix-style commands and environments. <span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span><p class="line867">
<h3 id="Getting_started:">Getting started:</h3>
<span class="anchor" id="line-119"></span><p class="line862">To begin with you need to generate segmentations of all the structure of interest in all subjects (see the <a href="./FIRST(2f)UserGuide.html#Segmentation_using_FIRST">segmentation</a> section). Note that it is the bvars files, which correspond directly to the surface representations, which will be needed and the volumetric representation from FIRST (e.g. <tt class="backtick">run_first_all</tt>) is not used. Hence it does not matter what boundary correction was used or whether one or more structures were segmented. <span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><p class="line862">One the segmentations are done, concatenate all of the bvars files for the structure you are going to run vertex-wise stats on. For example if you are looking for differences in the left hippocampus, and assuming your output bvar files are named <tt class="backtick">con*_L_Hipp_first.bvars</tt> and <tt class="backtick">dis*_L_Hipp_first.bvars</tt>, do<br>
 <tt class="backtick">concat_bvars&nbsp;con_to_dis_L_Hipp.bvars&nbsp;con*_L_Hipp_first.bvars&nbsp;dis*_L_Hipp_first.bvars</tt> <span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><p class="line862">This command will create a bvars file called <tt class="backtick">con_to_dis_L_Hipp.bvars</tt> that contains the bvars (mode paramters) of the segmentation of the left hippocampus from each subject in the order con01-con10, followed by dis01-dis10. <span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><p class="line867">
<h3 id="Create_a_design_matrix:">Create a design matrix:</h3>
<span class="anchor" id="line-126"></span><p class="line862">This is easiest done by using the &quot;Higher-level&quot; mode of the <tt class="backtick">Glm</tt> gui. However, the design matrices are treated slightly differently by FIRST compared with FEAT. The main difference is that FIRST does not model separate group variances and so ignores the &quot;Group&quot; column in the <tt class="backtick">Glm</tt> gui. Another difference is that only F-tests are needed if you just want to look for any change in vertex position.  Therefore it is only necessary to set up an F-contrast, although this needs T-contrasts to be set up (since that is how F-contrasts are specified). Individual T-contrasts can be used to look for signed differences (separating local &quot;expansion&quot; from &quot;contraction&quot; of the structure). For more details about this see the <a href="./FEAT.html">FEAT</a> documention. <span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span><p class="line874">For this example, imagine you are simply interested in finding a difference in shape between the two groups &quot;con&quot; and &quot;dis&quot;. Your design matrix would simply be an EV with 10 negative ones followed by 10 positive ones. That is: <span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span><p class="line867"><span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span><span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span><span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span><span class="anchor" id="line-151"></span><pre><span class="anchor" id="line-1"></span>-1
<span class="anchor" id="line-2"></span>-1
<span class="anchor" id="line-3"></span>-1
<span class="anchor" id="line-4"></span>-1
<span class="anchor" id="line-5"></span>-1
<span class="anchor" id="line-6"></span>-1
<span class="anchor" id="line-7"></span>-1
<span class="anchor" id="line-8"></span>-1
<span class="anchor" id="line-9"></span>-1
<span class="anchor" id="line-10"></span>-1
<span class="anchor" id="line-11"></span>1
<span class="anchor" id="line-12"></span>1
<span class="anchor" id="line-13"></span>1
<span class="anchor" id="line-14"></span>1
<span class="anchor" id="line-15"></span>1
<span class="anchor" id="line-16"></span>1
<span class="anchor" id="line-17"></span>1
<span class="anchor" id="line-18"></span>1
<span class="anchor" id="line-19"></span>1
<span class="anchor" id="line-20"></span>1</pre><span class="anchor" id="line-152"></span><p class="line862">Create this design (using the Glm GUI) and specify both a single T-contrast and single F-contrast, and then save them in files named <tt class="backtick">con1_dis2</tt> (choose the name <tt class="backtick">con1_dis2</tt> in the &quot;Save&quot; dialog of the <tt class="backtick">Glm</tt> GUI - it will produce <tt class="backtick">con1_dis2.mat</tt>, <tt class="backtick">con1_dis2.con</tt> and <tt class="backtick">con1_dis2.fts</tt>). Note that because the concatenated bvars files was created in the order &quot;con&quot;, then &quot;dis&quot;, in your design matrix group 1 is the &quot;con&quot; group and group 2 is the &quot;dis&quot; group. <span class="anchor" id="line-153"></span><span class="anchor" id="line-154"></span><p class="line862">You are now ready to run vertex_analysis. Note that for this example, the <tt class="backtick">--useReconNative</tt> option will be used. This carries out vertex analysis in native space, along with the <tt class="backtick">--useRigidAlign</tt> option. The <tt class="backtick">--useReconMNI</tt> option may also be used to carry out vertex analysis, it will do it in the MNI standard space instead, which normalises for brain size. It is difficult to say which will be more sensitive to changes in shape, and so it may be interesting to try both the <tt class="backtick">--useReconNative</tt> and the <tt class="backtick">--useReconMNI</tt> options. Also note that the <tt class="backtick">--useScale</tt> option will not be used. Without the <tt class="backtick">--useScale</tt> option, changes in both local shape <em>and size</em> can be found in shape analysis. This type of finding can be interpreted, for example, as local atrophy. With the <tt class="backtick">--useScale</tt> option, overall changes in size are lost. <span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span><p class="line862">Create a new directory (e.g. called <tt class="backtick">shape_analysis</tt>) within the current main directory. This will be where the results of shape analysis are saved. For example, <tt class="backtick">mkdir&nbsp;shape_analysis</tt> <span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><p class="line867">
<h3 id="Running_vertex_analysis">Running vertex analysis</h3>
<span class="anchor" id="line-159"></span><p class="line862">Run <tt class="backtick">first_utils</tt> giving it the combined bvars file and the design matrix.  For example: <span class="anchor" id="line-160"></span><span class="anchor" id="line-161"></span><p class="line867"><tt class="backtick">first_utils&nbsp;--vertexAnalysis&nbsp;--usebvars&nbsp;-i&nbsp;con_to_dis_L_Hipp.bvars&nbsp;-d&nbsp;con1_dis2.mat&nbsp;-o&nbsp;shape_analysis/con1_dis2_L_Hipp&nbsp;--useReconNative&nbsp;--useRigidAlign&nbsp;-v&nbsp;&gt;&amp;&nbsp;shape_analysis/con1_dis2_L_Hipp_output.txt</tt> <span class="anchor" id="line-162"></span><span class="anchor" id="line-163"></span><p class="line862">Run <tt class="backtick">randomise</tt> using the output 4D image (containing projections of the vertex displacements per subject) and the mask image, together with the design matrix and contrast files.  For example: <span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span><p class="line867"><tt class="backtick">randomise&nbsp;-i&nbsp;con1_dis2_L_Hipp.nii.gz&nbsp;-m&nbsp;con1_dis2_L_Hipp_mask.nii.gz&nbsp;-o&nbsp;con1_dis2_L_Hipp_rand&nbsp;-d&nbsp;con1_dis2.mat&nbsp;-t&nbsp;con1_dis2.con&nbsp;-f&nbsp;con1_dis2.fts&nbsp;--fonly&nbsp;-D&nbsp;-F&nbsp;3</tt> <span class="anchor" id="line-166"></span><span class="anchor" id="line-167"></span><p class="line862">Note that the option <tt class="backtick">-F&nbsp;3</tt> is only one of several multiple-comparison-correction options available, and this is just an example, not a standard recommendation. <span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span><p class="line867">
<h3 id="Output_of_vertex_analysis">Output of vertex analysis</h3>
<span class="anchor" id="line-170"></span><p class="line862">In the same way as in <a href="./FSLVBM.html">FSLVBM</a> and <a href="./TBSS.html">TBSS</a>, <tt class="backtick">randomise</tt> is used to generate the statistics. The output of most interest is the probability that is corrected for multiple comparisons.  This will contain <tt class="backtick">corrp</tt> in the filename.  The values within this file contain 1-p values, such that p=0.05 corresponds to a value of 0.95, and so displaying all values over 0.95 with FSLView will show the significant areas.  For more information about how to view these results refer to the documentation for <a class="nonexistent" href="./randomise.html">randomise</a>, <a href="./FSLVBM.html">FSLVBM</a> or <a href="./TBSS.html">TBSS</a>. <span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span><p class="line867">
<h3 id="Other_common_design_matrices">Other common design matrices</h3>
<span class="anchor" id="line-173"></span><p class="line867"><em>Correlation</em> <span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span><p class="line874">For correlation only (no group difference) you can create a design matrix with one column (EV) where each row contains the value of the correlating measure for each subject in the same order as the subject's bvars (in the concatenated bvars file). For example, to correlate age with shape, the design matrix would contain one EV, which would be a single column where each row has the age of each subject in the same order as the concatenated bvars file. If you have not removed the mean from the age values (i.e. demeaned them), then randomise will do it for you, although it will print a warning to this effect (which you can ignore). <span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span><p class="line874">Interpretting the results of a correlation: the values in the p-value images will give the probability of a zero correlation (the null hypothesis) at each vertex.  You can also do correlation with a covariate (see below). This gives you the same type of output statistics, but accounting for the covariates/confounds. <span class="anchor" id="line-178"></span><span class="anchor" id="line-179"></span><p class="line867"><em>Covariate</em> <span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span><p class="line874">To add a covariate to a group difference study, simple add a second column to the group difference design matrix. This second column should contain the demeaned scores (for each subject in the same order as the concatenated bavrs file) of the measure you wish to use as a covariate; for example, age. If you want to model different correlations in the different groups then you need a separate (demeaned) EV of scores per group.  This is the same as any standard GLM analysis, as are the contrasts, except that the final contrast of interest should always be made into an F-contrast (if it is not naturally one already) in order to do a two-sided test.  See other documentation on GLM and modelling for more information. <span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span><p class="line867">
<h2 id="Viewing_results">Viewing results</h2>
<span class="anchor" id="line-184"></span><p class="line862">Results from <tt class="backtick">randomise</tt> can be viewed in the standard orthographic viewer in FSLView (viewing orthogonal slices).  To distinguish the direction of the changes see the description in the <a href="./FIRST(2f)UserGuide.html#randomise">section on randomise</a> above. <span class="anchor" id="line-185"></span><span class="anchor" id="line-186"></span><p class="line867"><img align="middle" alt="first3Dview.png" class="attachment" height="200" src="attachments/FIRST(2f)UserGuide/first3Dview.png" title="first3Dview.png" /> <span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><p class="line862">Alternatively, it is possible to view the results as a 3D rendering (as shown in the image here), by using the script <tt class="backtick">first3Dview</tt>.  To use it follow these instructions: <span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><ul><li><p class="line862">run the script, giving it the mask output from <tt class="backtick">first_utils</tt> together with the corrected p-value output from <tt class="backtick">randomise</tt> (the one including <tt class="backtick">corrp</tt> in the name) <span class="anchor" id="line-191"></span></li><li>this script will open an FSLView window in which you must do the following <span class="anchor" id="line-192"></span></li><li>select &quot;basestruct&quot; in layer dialog (i.e. the list of images loaded), press &quot;i&quot; and turn &quot;Image type&quot; to &quot;Mask/Label&quot; <span class="anchor" id="line-193"></span></li><li>select the corrp image in the layer dialog (at the top of the list), press &quot;i&quot; and turn &quot;Image type&quot; to &quot;Statistic&quot; <span class="anchor" id="line-194"></span></li><li><p class="line862">via the menus select Tools -&gt; 3D Viewer <span class="anchor" id="line-195"></span></li><li><p class="line862">turn <tt class="backtick">Clipping</tt> on (tickbox) <span class="anchor" id="line-196"></span></li><li>press 'b' (make sure you've clicked inside the 3D rendered window) <span class="anchor" id="line-197"></span></li><li><p class="line862">adjust the clipped box such that the structure of interest is visible (and whatever brain sections you want - you can turn it all off by unclicking the <tt class="backtick">Clipping</tt> box and double clicking on the MNI152_T1_2mm_brain in the layer dialog - to deselect it) <span class="anchor" id="line-198"></span></li><li>press 'b' again <span class="anchor" id="line-199"></span></li><li>select the top image (corrp) in the dialog of the 3D viewer <span class="anchor" id="line-200"></span></li><li>move transparency slider (underneath the layer dialog) to the left and back to the right (this will make the colours solid) <span class="anchor" id="line-201"></span></li><li>rotate to give a good view and save your image (via screen grab or with the camera button) <span class="anchor" id="line-202"></span><span class="anchor" id="line-203"></span></li></ul><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-204"></span><hr /><p class="line874"> <span class="anchor" id="line-205"></span>
<h1 id="Volumetric_Analysis">Volumetric Analysis</h1>
<span class="anchor" id="line-206"></span><p class="line862">Currently, to perform volumetric analysis it is necessary to determine the label number of the structure of interest and use <tt class="backtick">fslstats</tt> to measure the volume. Other software (e.g. SPSS or MATLAB) needs to be used to analyse the volume measurements. <span class="anchor" id="line-207"></span><span class="anchor" id="line-208"></span><p class="line862">To find the label number, load the <tt class="backtick">output_name_*_firstseg.nii.gz</tt> image into FSLView, click on a voxel in the structure of interest and the label number will be the number in the Intensity box. Alternatively, you can find the number from the <a href="./FIRST(2f)UserGuide.html#Labels">CMA standard labels</a>. <span class="anchor" id="line-209"></span><span class="anchor" id="line-210"></span><p class="line862">Once you have the label number you can measure the volume using <tt class="backtick">fslstats</tt> with the threshold options to select out just the single label number (by using <tt class="backtick">-l</tt> and <tt class="backtick">-u</tt> with -/+0.5 from the desired label number). For example, if the label number is 17 (Left Hippocampus) then you can use the following command: <span class="anchor" id="line-211"></span><span class="anchor" id="line-212"></span><p class="line867"><tt class="backtick">fslstats&nbsp;output_name_all_fast_firstseg&nbsp;-l&nbsp;16.5&nbsp;-u&nbsp;17.5&nbsp;-V</tt> where the first number of the output is the number of voxels and the second is the volume in mm<sup>3</sup>. <span class="anchor" id="line-213"></span><span class="anchor" id="line-214"></span><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-215"></span>
<h1 id="Models">Models</h1>
<span class="anchor" id="line-216"></span><ul><li>The shape/appearance models used are stored in '${FSLDIR}/data/first/models_336_bin/'. The models were constructed from 336 subjects, consisting of children and adults, normals and subjects with pathologies. <span class="anchor" id="line-217"></span></li><li>The models in the 'intref_thal/' subdirectories use the intensities from within the thalamus to normalize the structures' intensities. <span class="anchor" id="line-218"></span></li><li>The models in the '05mm/' subdirectory require no boundary correction (all boundary voxels are considered part of the structure). <span class="anchor" id="line-219"></span></li><li><p class="line862">The fourth ventricle is combined with the brainstem, and so the labels for the BrainStem also (intentionally) cover the fourth ventricle. <span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span></li></ul><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-222"></span>
<h1 id="Advanced_Usage">Advanced Usage</h1>
<span class="anchor" id="line-223"></span><p class="line862">The following sections detail the more fundamental commands that the script <tt class="backtick">run_first_all</tt> calls. If problems are encountered when running <tt class="backtick">run_first_all</tt>, it is recommended that each of the individual stages described below be run separately in order to identify and fix the problem. <span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span><p class="line867">
<h2 id="Registration">Registration</h2>
<span class="anchor" id="line-226"></span><p class="line862">FIRST segmentation requires firstly that you run <tt class="backtick">first_flirt</tt> to find the affine transformation to standard space, and secondly that you run <tt class="backtick">run_first</tt> to segment a single structure (re-running it for each further structure that you require). These are both run by <tt class="backtick">run_first_all</tt> which also produces a summary segmentation image for all structures. <span class="anchor" id="line-227"></span><span class="anchor" id="line-228"></span><p class="line867"><strong>Please note</strong>, if the registration stage fails then the models fitting <em>will not</em> work, despite the fact that <tt class="backtick">run_first_all</tt> continues to run and may produce outputs. <span class="anchor" id="line-229"></span><span class="anchor" id="line-230"></span><ul><li>first_flirt <span class="anchor" id="line-231"></span><p class="line862">This script runs two-stage affine registration to MNI152 space at 1mm resolution (we will assume for these instructions that the image is named <tt class="backtick">con01.nii.gz</tt>). The first stage is a standard 12 degrees of freedom registration to the template. The second stage applies a 12 degrees of freedom registration using an MNI152 sub-cortical mask to exclude voxels outside the sub-cortical regions. The <tt class="backtick">first_flirt</tt> script now registers to the non-linear MNI152 template. The new models that are located in <tt class="backtick">${FSLDIR}/data/first/models_336_bin/</tt> were all trained using that template for normalization. Included with FIRST, are models for the left and right cerebellum. Instead of using a subcortical mask in the second stage of the registration procedure, a mask of the brain was used. When fitting the cerebellum models, you will need to input a different transformation matrix than that used for the other structures. <tt class="backtick">first_flirt</tt> will <em><strong>not</em></strong> perform the necessary registration by default, the <tt class="backtick">-cort</tt> <em><strong>flag must be specified</strong></em>. The cerebellum uses the putamen intensities to normalize its intensity samples (use the <tt class="backtick">-intref</tt> option). <span class="anchor" id="line-232"></span><span class="anchor" id="line-233"></span></li></ul><p class="line867"><tt class="backtick">first_flirt</tt> should be used on <em><strong>whole-head</strong></em> (non-betted) images. Although it is generally discouraged, the flag <tt class="backtick">-b</tt> will allow <tt class="backtick">first_flirt</tt> to also be used on brain extracted data. <span class="anchor" id="line-234"></span><span class="anchor" id="line-235"></span><ul><li>Example usage: <span class="anchor" id="line-236"></span><span class="anchor" id="line-237"></span></li></ul><p class="line867"><tt class="backtick">first_flirt&nbsp;con01&nbsp;con01_to_std_sub</tt> <span class="anchor" id="line-238"></span><span class="anchor" id="line-239"></span><p class="line862">This command uses the T1-weighted image <tt class="backtick">con01.nii.gz</tt> as the input and will generate the registered (<tt class="backtick">con01_to_std_sub.nii.gz</tt>) and the transformation matrix (<tt class="backtick">con01_to_std_sub.mat</tt>). <span class="anchor" id="line-240"></span><span class="anchor" id="line-241"></span><ul><li>Additional options: <span class="anchor" id="line-242"></span><ul><li><p class="line862">The <tt class="backtick">-d</tt> option prevents the deletion of the images and transformation matrices produced in the intermediary registration steps. This is used for debugging purposes. <span class="anchor" id="line-243"></span></li><li><p class="line862">The <tt class="backtick">-b</tt> option specifies that the input has been brain extracted (and so uses the brain extracted MNI template rather than the whole head template). <span class="anchor" id="line-244"></span></li><li><p class="line862">The <tt class="backtick">-inweight</tt> specifies a weighting image for the input image in the first stage of the registration - useful to deweight pathologies or artefacts. <span class="anchor" id="line-245"></span></li><li><p class="line862">The <tt class="backtick">-cort</tt> option indicates that <tt class="backtick">first_flirt</tt> should perform the alternate &quot;second stage&quot; in addition to the standard procedure (&quot;<tt class="backtick">_cort</tt>&quot; will be appended to the output name). Rather than using a subcortical mask, a brain mask is used. <em><strong>This option should be used if intending to run the cerebellum models</strong></em>. <span class="anchor" id="line-246"></span><span class="anchor" id="line-247"></span></li></ul></li></ul><p class="line862">You should verify that the registrations were successful prior to further processing (e.g. using <tt class="backtick">${FSLDIR}/bin/slicesdir&nbsp;-p&nbsp;${FSLDIR}/data/standard/MNI152_T1_1mm.nii.gz&nbsp;*_to_std_sub.nii.gz</tt>). When assessing the registration, pay attention to the sub-cortical structures. Note that the cortex may not always align well, particularly where there are large ventricles. <span class="anchor" id="line-248"></span><span class="anchor" id="line-249"></span><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-250"></span>
<h2 id="Segmentation">Segmentation</h2>
<span class="anchor" id="line-251"></span><ul><li>run_first This script will run FIRST to extract a single structure. The main arguments that are required are: (-i) the input image, (-t) transformation matrix, (-o) name of output image, (-n) the number of modes of variation and (-m) the model. <span class="anchor" id="line-252"></span><span class="anchor" id="line-253"></span></li><li class="gap">Main options: -i : the T1-weighted image to be segmented. -t : the matrix that describes the transformation of T1-weighted image into standard space, concentrating on subcortical structures (as found by first_flirt). <span class="anchor" id="line-254"></span><p class="line862">-n : the number of modes of variation to be used in the fitting. The more modes of variation used the finer details FIRST may capture, however you may decrease the robustness/reliability of the results. The more modes that are included the longer FIRST will take to run. The current suggested number of modes is for each structure is given in <a class="nonexistent" href="./Labels.html">sub-cortical labels</a> and incorporated into the defaults for run_first_all. The suggested number of modes is based on leave-one-out cross-validation run on the training set. The maximum number of modes available is 336. <tt class="backtick">-o</tt> : the basename to be used for FIRST output files. Three files are output: <tt class="backtick">output_name.vtk</tt>, <tt class="backtick">output_name.nii.gz</tt> and <tt class="backtick">output_name.bvars</tt> if &quot;-o output_name&quot; was specified. <tt class="backtick">-m</tt> : the model file (e.g. <tt class="backtick">${FSLDIR}/data/first/models_336_bin/L_Hipp_bin.bmv</tt>). The full path name to the model must be used. <span class="anchor" id="line-255"></span><span class="anchor" id="line-256"></span></li><li class="gap">Example usage: <span class="anchor" id="line-257"></span><ul><li><p class="line891"><tt class="backtick">run_first&nbsp;-i&nbsp;con01&nbsp;-t&nbsp;con01_to_std_sub.mat&nbsp;-n&nbsp;40&nbsp;-o&nbsp;con01_L_Hipp&nbsp;-m&nbsp;${FSLDIR}/data/first/models_336_bin/L_Hipp_bin.bmv&nbsp;Note&nbsp;the&nbsp;recommended&nbsp;style&nbsp;for&nbsp;the&nbsp;output&nbsp;name:&nbsp;subjectID_structure</tt> <span class="anchor" id="line-258"></span><span class="anchor" id="line-259"></span></li></ul></li><li class="gap">Other options: <span class="anchor" id="line-260"></span><p class="line891"><tt class="backtick">-loadBvars</tt> : Initializes FIRST with a previous estimate of the structure. If used with -shcond it initializes the structure to be conditioned on. ). The direction of the conditional is important, for example, L_<a class="nonexistent" href="./CaudCondThal.html">CaudCondThal</a>.bmap is used for the left caudate conditioned on the left thalamus, i.e. the thalamus is segmented first, this result is fixed, and then the caudate segmentation is done using the thalamus result. !---&gt; <tt class="backtick">-intref</tt> : This option will make FIRST use a reference structure for the local intensity normalization instead of the interior of the structure itself. The intref option precedes the model file that will be used for reference structure (i.e. the thalamus). The model file used (the -m option) must correspond to the intensity model of the reference structure (i.e. the thalamus). Currently the Caudate, Hippocampus and Amygdala can be segmented in this way using the Thalamus as reference, and the Cerebellum can be segmented using the Putamen as reference; the relevant models are located in<br>
 <tt class="backtick">${FSLDIR}/data/first/models_336_bin/intref_thal/</tt>, and in<br>
  <tt class="backtick">${FSLDIR}/data/first/models_336_bin/intref_puta/</tt>. The For example: <tt class="backtick">run_first&nbsp;-i&nbsp;con01&nbsp;-t&nbsp;con01_to_std_sub.mat&nbsp;-n&nbsp;30&nbsp;-o&nbsp;con01_L_Hipp&nbsp;-m</tt><br>
 <tt class="backtick">${FSLDIR}/data/first/models_336_bin/intref_thal/L_Hipp.bmv&nbsp;-intref&nbsp;${FSLDIR}/data/first/models_336_bin/05mm/L_Thal_05mm.bmv</tt> <tt class="backtick">-multipleImages</tt>: This options allows FIRST to run on multiple images by inputting a list of images, transformation matrices and output basenames. For a single structure, FIRST will be run on each image independently. There are some computational savings due to the fact that the model does not need to be re-read from file for each image, although the savings are small and the option is primarily included for convenience. When using this option, you should not include the transformation matrix with the <tt class="backtick">-t</tt> option. The output name specified by the <tt class="backtick">-o</tt> option will be appended to the output name specified in the input list. The input list is a plain, 3 column text file. The first column specifies the images (advisable to include full paths), the second column is the transformation matrices output by <tt class="backtick">first_flirt</tt>, the third column is the base output name. <span class="anchor" id="line-261"></span><span class="anchor" id="line-262"></span></li><li class="gap">Example usage: <span class="anchor" id="line-263"></span><ul><li><p class="line891"><tt class="backtick">run_first&nbsp;-i&nbsp;con01&nbsp;-t&nbsp;con01_to_std_sub.mat&nbsp;-n&nbsp;40&nbsp;-o&nbsp;con01_seg&nbsp;-m&nbsp;${FSLDIR}/data/first/models_336_bin/L_Hipp_bin.bmv&nbsp;-loadvars&nbsp;seg_first.bvars&nbsp;-shcond&nbsp;st1_given_st2.bmap&nbsp;-intref&nbsp;modelRef.bmv</tt> <span class="anchor" id="line-264"></span></li><li><p class="line891"><tt class="backtick">run_first&nbsp;-i&nbsp;image_xfm_output_list.txt&nbsp;-n&nbsp;40&nbsp;-o&nbsp;L_Thal_n40&nbsp;-m&nbsp;${FSLDIR}/data/first/models_336_bin/05mm/L_Thal_05mm.bmv</tt> <span class="anchor" id="line-265"></span><span class="anchor" id="line-266"></span></li></ul></li></ul><p class="line862">where <tt class="backtick">image_xfm_output_list.txt</tt> may look like, <span class="anchor" id="line-267"></span><span class="anchor" id="line-268"></span><p class="line867"><span class="anchor" id="line-269"></span><span class="anchor" id="line-270"></span><span class="anchor" id="line-271"></span><span class="anchor" id="line-272"></span><pre><span class="anchor" id="line-1-1"></span>subject_1_t1     subject_1_t1_to_mni.mat     subject_1
<span class="anchor" id="line-2-1"></span>subject_2_t1     subject_2_t1_to_mni.mat     subject_2
<span class="anchor" id="line-3-1"></span>subject_3_t1     subject_3_t1_to_mni.mat     subject_3</pre><span class="anchor" id="line-273"></span><p class="line862">By using the above command, FIRST would fit <tt class="backtick">L_Thal_05mm.bmv</tt> to <tt class="backtick">subject_1</tt>, <tt class="backtick">subject_2</tt>, and <tt class="backtick">subject_3</tt>. The output would be a nifti <strong>image, .bvars and .vtk</strong> output files, with the base names <tt class="backtick">subject_1_L_Thal_n40</tt>, <tt class="backtick">subject_2_L_Thal_n40</tt>, and <tt class="backtick">subject_3_L_Thal_n40</tt> respectively. <span class="anchor" id="line-274"></span><span class="anchor" id="line-275"></span><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-276"></span>
<h1 id="Boundary_Correction">Boundary Correction</h1>
<span class="anchor" id="line-277"></span><p class="line867">
<h2 id="first_boundary_corr">first_boundary_corr</h2>
<span class="anchor" id="line-278"></span><p class="line862">This program is used for the classification of the boundary voxels in the volumetric output for a single structure. It takes the segmentation image output by <tt class="backtick">run_first</tt> and classifies the boundary voxels as belonging to the structure or not. The output volume will have only a single label. <span class="anchor" id="line-279"></span><span class="anchor" id="line-280"></span><p class="line874">Usage: <span class="anchor" id="line-281"></span><span class="anchor" id="line-282"></span><p class="line867"><tt class="backtick">first_boundary_corr&nbsp;-s&nbsp;segmented_image&nbsp;-i&nbsp;intensity_image&nbsp;-b&nbsp;method&nbsp;-o&nbsp;output_name</tt> <span class="anchor" id="line-283"></span><span class="anchor" id="line-284"></span><ul><li><p class="line891"><tt class="backtick">-s</tt> : This specifies the segmented image from FIRST (which is labelled with a value for interior voxels and value+100 for boundary voxels) <span class="anchor" id="line-285"></span></li><li><p class="line891"><tt class="backtick">-i</tt> : This specifies the original T1-weighted image (either whole head or brain extracted) <span class="anchor" id="line-286"></span></li><li><p class="line891"><tt class="backtick">-b</tt> : This specifies the boundary correction method to be used. Current options are: <tt class="backtick">fast</tt>, <tt class="backtick">thresh</tt>, <tt class="backtick">none</tt> where <tt class="backtick">fast</tt> uses FSL's FAST-based tissue classification for correcting boundary voxels, <tt class="backtick">thresh</tt> uses a simpler classification based on a single Gaussian intensity model (which requires a threshold to be specified with another option: <tt class="backtick">-t</tt>), and <tt class="backtick">none</tt> which simply converts all boundary voxels into valid interior voxels. <span class="anchor" id="line-287"></span></li><li><p class="line891"><tt class="backtick">-o</tt> : This specifies the name of the output. <span class="anchor" id="line-288"></span><span class="anchor" id="line-289"></span></li></ul><p class="line862">For the models contained in <tt class="backtick">${FSLDIR}/data/first/models_336_bin/05mm/</tt>, all boundary voxels are considered as belonging to the structure, and hence none is the appropriate correction method. This is done automatically by <tt class="backtick">run_first_all</tt>. <span class="anchor" id="line-290"></span><span class="anchor" id="line-291"></span><p class="line867">
<h2 id="first_mult_bcorr">first_mult_bcorr</h2>
<span class="anchor" id="line-292"></span><p class="line862">This program is used to correct overlapping segmentations after boundary correction has been run on each structure independently. It requires the combined corrected and uncorrected segmentations (as separate 4D files) in addition to the original T1-weigthed image. This is called automatically by <tt class="backtick">run_first</tt>. <span class="anchor" id="line-293"></span><span class="anchor" id="line-294"></span><p class="line862">Usage:  <tt class="backtick">first_mult_bcorr&nbsp;-i&nbsp;t1_image&nbsp;-c&nbsp;4D_corrected_labels&nbsp;-u&nbsp;4D_uncorrected_labels&nbsp;-o&nbsp;output_name</tt> <span class="anchor" id="line-295"></span><span class="anchor" id="line-296"></span><ul><li><p class="line891"><tt class="backtick">-i</tt> : This specifies the original T1-weighted image (either whole head or brain extracted) <span class="anchor" id="line-297"></span></li><li><p class="line891"><tt class="backtick">-c</tt> : This specifies a 4D file containing the boundary corrected images of the segmented structures. <span class="anchor" id="line-298"></span></li><li><p class="line891"><tt class="backtick">-u</tt> : This specifies a 4D file containing the individual structure segmented images prior to any boundary correction, where the boundary voxels are labeled as 100 plus the interior label vallue. The order of the structure images must be the same as the file specified by the -c option. <span class="anchor" id="line-299"></span></li><li><p class="line891"><tt class="backtick">-o</tt> : This specifies the name of the output. <span class="anchor" id="line-300"></span><span class="anchor" id="line-301"></span></li></ul><p class="line874">Any voxel labeled by two or more structures is re-classified as belonging to only one structure. This is based on how similar the intensity is to the intensity distributions of the interior voxels for the competing structures. However, if one structure labels the voxel as an interior voxel and the other labels it as a boundary voxel it will be classified as belonging to the interior of the former structure, regardless of its intensity. <span class="anchor" id="line-302"></span><span class="anchor" id="line-303"></span><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-304"></span>
<h1 id="Surface-based_Vertex_Analysis">Surface-based Vertex Analysis</h1>
<span class="anchor" id="line-305"></span><p class="line862">This is the old method of vertex analysis, invoked using <tt class="backtick">--surfaceout</tt> in <tt class="backtick">first_utils</tt>, that is based on multivariate statistics, but is not recommended due to restrictions in the design matrices, contrasts and multiple-comparison-correction method.  When using this option be aware that although it will also generate image outputs, the images outputs <em>do not</em> use the design matrix or do any statistical testing.  It is only the multivariate statistics, as shown on the surface outputs, that use the design matrix. <span class="anchor" id="line-306"></span><span class="anchor" id="line-307"></span><p class="line874">Note: for more complicated design matrices, with multiple EVs, each EV is tested in turn (with an implicit contrast that is one for that EV and zero for all others). A separate test is run for each such contrast, so that N results are generated when there are N EVs. Also, the constant EV is always implicitly added and user-specified EVs are demeaned. The contrast never includes the constant EV. <span class="anchor" id="line-308"></span><span class="anchor" id="line-309"></span><ul><li style="list-style-type:none">When the groups are not obviously defined (e.g. the EV is not a group membership EV) they are implicitly generated such that first group consists of all subjects where the (demeaned) EV in question is less than or equal to zero, and the second group consists of the remaining subjects. For a simple group membership EV (testing the difference between two groups) this is a simple relationship where the &quot;first&quot; group are the ones with the lower values in the EV. For other regressors (e.g. an age covariate) this definition of &quot;groups&quot; will not be so intuitive, however it is useful to work out so that the direction of the mean difference vectors can be interpretted. <span class="anchor" id="line-310"></span><span class="anchor" id="line-311"></span></li></ul><p class="line867">
<h2 id="Viewing_surface_outputs">Viewing surface outputs</h2>
<span class="anchor" id="line-312"></span><p class="line874">The slider in the mesh controls panel in FSLVIEW will allow you to deform the mesh between the group means. The surface colouring is the multivariate F statistic (based on Pillai's Trace). The length of the vectors and the statistics are not linearly related - the former is dependent only on the mean difference between groups while the latter is a statistic that takes the variances into account. <span class="anchor" id="line-313"></span><span class="anchor" id="line-314"></span><p class="line862">For surface-based output the only available method of multiple-comparison-correction uses False Discovery Rate (FDR) correction via the utility <tt class="backtick">surface_fdr</tt>. <span class="anchor" id="line-315"></span><span class="anchor" id="line-316"></span><p class="line867">
<h2 id="surface_fdr">surface_fdr</h2>
<span class="anchor" id="line-317"></span><p class="line867"><strong>Usage:</strong> <span class="anchor" id="line-318"></span><span class="anchor" id="line-319"></span><p class="line867"><tt class="backtick">surface_fdr&nbsp;input.vtk</tt> <span class="anchor" id="line-320"></span><span class="anchor" id="line-321"></span><p class="line867"><strong>Outputs:</strong> <span class="anchor" id="line-322"></span><span class="anchor" id="line-323"></span><p class="line862">Will create files <tt class="backtick">input_Fthresh.vtk</tt> and <tt class="backtick">input_pvals.vtk</tt> and some small image files (which can be ignored). The first mesh output, <tt class="backtick">input_Fthresh.vtk</tt> is a mesh containing the thresholded F statistics; that is, those that survive the FDR thresholding. The second mesh output, <tt class="backtick">input_pvals.vtk</tt> is a mesh containing the <em>uncorrected</em> p-values. The utility will also output the FDR threshold (as a p-value) when running. This FDR threshold can be used to threshold this p-value mesh to create the same significant areas as in the thresholded F-statistic mesh output. <span class="anchor" id="line-324"></span><span class="anchor" id="line-325"></span><p class="line874">Note that for surface output, as of FSL4.1.3, all surface files generated by vertex analysis contain the relevant Degrees Of Freedom and bvars files contain registration matrices (and are now in a binary format). Also, as substantial improvements in the sensitivity of the statistics were made between FSL4.1.2 and FSL4.1.3, it is recommended and necessary to re-run previous vertex analyses with the newer version of FIRST and not attempt to combine with outputs generated by previous versions. <span class="anchor" id="line-326"></span><span class="anchor" id="line-327"></span><p class="line867">
<h2 id="General_Advice_and_Workflow-2">General Advice and Workflow</h2>
<span class="anchor" id="line-328"></span><p class="line874">To begin with, run the same steps as described above for Getting Started and Create a Design Matrix. <span class="anchor" id="line-329"></span><span class="anchor" id="line-330"></span><p class="line862">Note that in this mode FIRST will demean the design matrix and performs its own contrasts, therefore it is not necessary to set up contrasts in the <tt class="backtick">Glm</tt> gui (they will be ignored) and it is not necessary to demean your EVs (FIRST will do this automatically) or include a constant EV (FIRST will do this too). <span class="anchor" id="line-331"></span><span class="anchor" id="line-332"></span><p class="line867">
<h3 id="Running_vertex_analysis:">Running vertex analysis:</h3>
<span class="anchor" id="line-333"></span><p class="line867"><tt class="backtick">first_utils&nbsp;--vertexAnalysis&nbsp;--surfaceout&nbsp;--usebvars&nbsp;-i&nbsp;con_to_dis_L_Hipp.bvars&nbsp;-d&nbsp;con1_dis2.mat&nbsp;-o&nbsp;shape_analysis/con1_dis2_L_Hipp&nbsp;--useReconNative&nbsp;--useRigidAlign&nbsp;-v&nbsp;&gt;&amp;&nbsp;shape_analysis/con1_dis2_L_Hipp_output.txt</tt> <span class="anchor" id="line-334"></span><span class="anchor" id="line-335"></span><p class="line862">Note that the -v option displays the details of certain calculations to the command line and the &gt;&amp; option captures this output into a file (here called <tt class="backtick">con1_dis2_L_Hipp_output.txt</tt>). This output may be useful to save. <span class="anchor" id="line-336"></span><span class="anchor" id="line-337"></span><p class="line867">
<h3 id="Output_of_vertex_analysis:">Output of vertex analysis:</h3>
<span class="anchor" id="line-338"></span><p class="line862">In the <tt class="backtick">shape_analysis</tt> directory there will be a file called <tt class="backtick">con1_dis2_L_Hipp1.vtk</tt>. This is the 3D mesh displaying the results of vertex analysis (the number 1 represents the first EV tested - in this case the only one). Open FSLView and add a standard brain. Start the 3D viewer and turn off the standard brain (this was simply added to get the 3D viewer started). Click the add mesh button and open the <tt class="backtick">con1_dis2_L_Hipp1.vtk</tt> file. A 3D surface of the hippocampus will open with the uncorrected F stats for the difference between groups displayed at each vertex on the surface. Something like this (initially without the vectors, but see below): <span class="anchor" id="line-339"></span><span class="anchor" id="line-340"></span><p class="line867"><img align="middle" alt="vertexana.png" class="attachment" src="attachments/FIRST(2f)UserGuide/vertexana.png" title="vertexana.png" /> <span class="anchor" id="line-341"></span><span class="anchor" id="line-342"></span><p class="line874">The colour bar indicates the statistic values; an increase from red to blue is going from a lower to higher statistical significance. Note that the colours only indicate where any difference between groups was found, not the direction of this difference. The vectors (little arrows shown on the surface) indicate the direction of change. Open the mesh properties window. Scale the vectors by a value of 2 to 5 for better visualization. These vectors point from the mean surface of whatever subjects corresponded to a value of 0 or less in the design matrix (demeaned EV1) to the mean surface of others subjects. In this case controls were given a value of 0 and diseased a value of 1. Therefore FIRST would have demeaned this design matrix so that controls had a value of -0.5 and diseased had a valued of +0.5. These vectors therefore point from the mean surface of control group (viewed by sliding the mesh slider to position 0) to the mean surface of diseased group (viewed by sliding the mesh slider to position 1). In this case, if the vector points inward at a given vertex, then that means that that vertex on the mean control surface moves inward to reach the same vertex on the mean diseased surface. For example, on the side of the hippocampus in the image above you can see a large patch of blue with vectors pointing inward. These vectors indicate that the direction of difference is such that the diseased hippocampus is smaller/thinner here than in the control group, consistent with local atrophy. Note that the vectors give direction while the colours indicate the statistical strength of the difference in any direction. <span class="anchor" id="line-343"></span><span class="anchor" id="line-344"></span><p class="line867">
<h3 id="Running_Multiple_Comparison_Correction:">Running Multiple Comparison Correction:</h3>
<span class="anchor" id="line-345"></span><p class="line874">Following this you should correct for multiple comparisons to get corrected statistics. Do this with: <span class="anchor" id="line-346"></span><span class="anchor" id="line-347"></span><p class="line867"><tt class="backtick">surface_fdr&nbsp;con1_dis2_L_Hipp1.vtk</tt> <span class="anchor" id="line-348"></span><span class="anchor" id="line-349"></span><p class="line862">This generates an output called <tt class="backtick">con1_dis2_L_Hipp1_Fthresh.vtk</tt> which you can then view in FSLView, in the same way as above, and only shows non-zero statistics where they survived the FDR multiple comparison correction. Note that an FDR threshold of zero means that no vertices have survived multiple comparison correction. <span class="anchor" id="line-350"></span><span class="anchor" id="line-351"></span><p class="line867">
<h3 id="Other_common_design_matrices:">Other common design matrices:</h3>
<span class="anchor" id="line-352"></span><p class="line867"><em>Correlation</em> <span class="anchor" id="line-353"></span><span class="anchor" id="line-354"></span><p class="line874">For correlation only (no group difference) you can create a design matrix with one column (EV) where each row contains the value of the correlating measure for each subject in the same order as the subject's bvars (in the concatenated bvars file). For example, to correlate age with shape, the design matrix would contain one EV, which would be a single column where each row has the age of each subject in the same order as the concatenated bvars file. There is no need to demean the age values, as FIRST will demean them for you. <span class="anchor" id="line-355"></span><span class="anchor" id="line-356"></span><p class="line874">Interpretting the results of a correlation: the colours on the surface of the mesh will display the strength of the correlation at each vertex, while the vectors will display the direction of the correlation. Surface 0 on the slider is the mean surface for all of the subjects younger than the mean age, while surface 1 on the slider is the mean surface for all of the subjects older than the mean age. The vectors point from surface 0 to surface 1, which is from the younger group to the older. <span class="anchor" id="line-357"></span><span class="anchor" id="line-358"></span><p class="line874">You can also do correlation with a covariate (see below). This gives you statistics as explained above (but accounting for the other EVs) but the interpretation of the vectors will no longer be the same as that described above, but will instead depend only on the groupings defined by the first column of the design matrix (EV1). <span class="anchor" id="line-359"></span><span class="anchor" id="line-360"></span><p class="line867"><em>Covariate</em> <span class="anchor" id="line-361"></span><span class="anchor" id="line-362"></span><p class="line862">To add a covariate to a group difference study, simple add a second column to the design matrix for the group difference. This second column should contain the raw scores (for each subject in the same order as the concatenated bavrs file) of the measure you wish to use as a covariate; for example, age. Vertex analysis will now produced two vtk files, with one file called <tt class="backtick">output_name1.vtk</tt>, showing the areas of group difference after accounting for the covariate. The file called <tt class="backtick">output_name2.vtk</tt>, on the other hand, will show the areas that correlate with the covariate (e.g. age) after accounting for group difference. <span class="anchor" id="line-363"></span><span class="anchor" id="line-364"></span><p class="line874">Note that the mean surfaces and vectors will be the same in each case (although vectors only show at vertices where the statistics were significant, and these statistics will vary) since the mean surfaces and vectors are always defined by the grouping in the first column of the design matrix (EV1), with the first group being all values below the mean and the second group being all values above the mean. <span class="anchor" id="line-365"></span><span class="anchor" id="line-366"></span><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-367"></span>
<h1 id="first_utils">first_utils</h1>
<span class="anchor" id="line-368"></span><p class="line874">This command can be used to fill meshes, as well as for running vertex analysis. <span class="anchor" id="line-369"></span><span class="anchor" id="line-370"></span><ul><li><p class="line862">To fill a mesh :<br>
 Usage: <span class="anchor" id="line-371"></span><span class="anchor" id="line-372"></span></li></ul><p class="line867"><tt class="backtick">first_utils&nbsp;--meshToVol&nbsp;-m&nbsp;mesh.vtk&nbsp;-i&nbsp;t1_image.nii.gz&nbsp;-l&nbsp;fill_value&nbsp;-o&nbsp;output_name</tt> <span class="anchor" id="line-373"></span><span class="anchor" id="line-374"></span><ul><li><p class="line891"><tt class="backtick">--meshToVol</tt> : Set to fill mesh mode of operation. <span class="anchor" id="line-375"></span></li><li><p class="line891"><tt class="backtick">-i</tt> : Base image to which the mesh corresponds. <span class="anchor" id="line-376"></span></li><li><p class="line891"><tt class="backtick">-m</tt> : An ASCII vtk mesh. <span class="anchor" id="line-377"></span></li><li><p class="line891"><tt class="backtick">-o</tt> : Name of output volume. <span class="anchor" id="line-378"></span></li><li><p class="line891"><tt class="backtick">-l</tt> : Label with which to fill the mesh (boundary voxels will be assigned label+100). <span class="anchor" id="line-379"></span><span class="anchor" id="line-380"></span></li></ul><p class="line867">
<h1 id="Labels">Labels</h1>
<span class="anchor" id="line-381"></span><p class="line862">10 Left-Thalamus-Proper 40<br>
 11 Left-Caudate 30<br>
  12 Left-Putamen 40<br>
  13 Left-Pallidum 40<br>
 16 Brain-Stem /4th Ventricle 40<br>
  17 Left-Hippocampus 30<br>
  18 Left-Amygdala 50<br>
  26 Left-Accumbens-area 50<br>
  49 Right-Thalamus-Proper 40<br>
  50 Right-Caudate 30<br>
  51 Right-Putamen 40<br>
  52 Right-Pallidum 40<br>
  53 Right-Hippocampus 30<br>
  54 Right-Amygdala 50<br>
  58 Right-Accumbens-area 50 <span class="anchor" id="line-382"></span><span class="anchor" id="line-383"></span><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-384"></span><span class="anchor" id="bottom"></span></div>
</div>
<hr>
2017-04-20 13:28
</body>
</html>
